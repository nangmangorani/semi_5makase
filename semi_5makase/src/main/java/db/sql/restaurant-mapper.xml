<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE properties SYSTEM "http://java.sun.com/dtd/properties.dtd">
<properties>

	<entry key="increaseRestaurantView">
		UPDATE RESTAURANT
		   SET REST_VIEWS = REST_VIEWS + 1
		 WHERE REST_NO = ?
	</entry>

	<entry key="selectRestaurantDetail">
		SELECT 
		       REST_NO
		     , REST_NAME
		     , REST_ADDRESS
		     , REST_PHONE
		     , PARKING
		     , INTRO
		     , REST_VIEWS
		     , OPENING_TIME
		     , REST_TIME
		     , BREAK_TIME
		  FROM RESTAURANT
		  JOIN OPEN_TIME USING (REST_NO)
		 WHERE REST_NO = ?
	</entry>
	
	<entry key="selectMenuList">
		SELECT 
		       REST_NO
		     , FILE_NO
		     , MENU
		     , TO_CHAR(PRICE, 'FM99,999') PRICE
		     , MENU_GRADE
		  FROM MENU
		 WHERE REST_NO = ?
	</entry>
	
	<entry key="selectFavoriteCount">
		SELECT 
		       COUNT(*) count
		  FROM FAVORITES
		 WHERE REST_NO = ?
	</entry>
	
	<entry key="selectReviewCount">
		SELECT 
		       COUNT(*) count
		  FROM REVIEW
		 WHERE REST_NO = ?
	</entry>
	
	<entry key="selectReviewRatingAvg">
		SELECT AVG(RATING) avg
		  FROM REVIEW
		  JOIN RESTAURANT USING (REST_NO)
		 WHERE REST_NO = ?
	</entry>
	
	<!-- 아직안씀  -->
	<entry key="updateRestaurant">
		UPDATE RESTAURANT
		   SET CATEGORY_NO = (SELECT CATEGORY_NO FROM RESTAURANTUPDATE WHERE REST_NO = ?)
		     , TV = (SELECT TV FROM RESTAURANTUPDATE WHERE REST_NO = ?)
		     , REST_NAME = (SELECT REST_NAME FROM RESTAURANTUPDATE WHERE REST_NO = ?)
		     , REST_ADDRESS = (SELECT REST_ADDRESS FROM RESTAURANTUPDATE WHERE REST_NO = ?)
		     , REST_PHONE = (SELECT REST_PHONE FROM RESTAURANTUPDATE WHERE REST_NO = ?)
		     , PARKING = (SELECT PARKING FROM RESTAURANTUPDATE WHERE REST_NO = ?)
		     , INTRO = (SELECT INTRO FROM RESTAURANTUPDATE WHERE REST_NO = ?)
		     , REST_VIEWS = (SELECT REST_VIEWS FROM RESTAURANTUPDATE WHERE REST_NO = ?)
		 WHERE REST_NO = ?  
	</entry>
	
	<entry key="checkFavorite">
		SELECT COUNT(*) COUNT
		  FROM FAVORITES
		  JOIN MEMBER USING (MEM_NO)
		  JOIN RESTAURANT USING (REST_NO)
		 WHERE MEM_NO = ?
		   AND REST_NO = ?
	</entry>
	
	
	<entry key="deleteFavoriteRestaurant">
		DELETE
		  FROM FAVORITES
		 WHERE MEM_NO = ?
		   AND REST_NO = ?
	</entry>
	
	<entry key="insertFavoriteRestaurant">
		INSERT
		  INTO FAVORITES
		  (
		    MEM_NO
		  , REST_NO 
		  )
		VALUES
		  (
		    ?
		  , ?  
		  )
	</entry>
	
</properties>